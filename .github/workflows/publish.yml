name: publish-to-npm
on:
  release:
    types: [created]
  push:
    branches:
      - chore/publish-to-npm
jobs:
  publish:
    runs-on: ubuntu-latest
    steps:
    - uses: actions/checkout@v4
    - uses: ./.github/actions/install
    - run: pnpm nx run-many -t check:all --all
    - run: pnpm -r publish --no-git-checks
      env:
        NODE_AUTH_TOKEN: ${{ secrets.NPM_TOKEN }}
